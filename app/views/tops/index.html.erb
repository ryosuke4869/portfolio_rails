<div class="top-wrapper">
  <div class="container">
    <div class="inner-bg">
      <%= image_tag "background-img.jpeg", alt: "Topデスク画像" %>
      <div class="row">
        <div class="col text">
          <h1>デスク環境shareしてみませんか?</h1>
          <div class="description">
            <p>自分が使用している機材を登録することができます。<br>
            自分のデスク画像を投稿することができます<br>
            他の人の投稿にいいねをつけることやその投稿をお気に入りとして保存することもできます</p>
          </div>
        </div>
      </div>
    </div>
  </div>

	<!-- Section 1 -->
	<%# いいね数が多い順 %>
  <div class="container top-section">
    <h3>いいね数ランキング</h3>
    <div class="row like-rank">
      <% @like_posts.each do |like_post| %>
        <div class="col-md-4">
          <%= link_to post_path(like_post.id), class: "card-link" do %>
            <div class="card">
              <div class="card-img-top" style="overflow: hidden;">
                <%= image_tag like_post.desk_images[0].variant(resize: "478x269!").processed, style: "width: 100%; height: auto;" if like_post.desk_images.attached? %>
              </div>
              <div class="card-body">
                <% if like_post.user.avatar.attached? %>
                  <%= image_tag like_post.user.avatar, class: "host-icon" %>
                <% else %>
                  <img class="host-icon" src="/assets/default_icon.jpeg">
                <% end %>
                <%= like_post.user.name %>
                <i class="fa fa-heart" aria-hidden="true"></i>
                <%= like_post.likes.count %>
                <i class="fa-regular fa-comments" aria-hidden="true"></i>
                <%= like_post.comments.count %>
                <i class="fa-regular fa-bookmark" aria-hidden="true"></i>
                <%= like_post.bookmarks.count %>
                <div class="post-title">
                  <%= like_post.title %>
                </div>
              </div>
            </div>
          <% end %>
        </div>
      <% end %>
    </div>
  </div>

  <!-- Section 2 -->
	<%# 最近の投稿 %>
  <div class="container top-section">
    <h3>最近の投稿</h3>
    <div class="row recent-post">
      <% @recent_posts.each do |recent_post| %>
        <div class="col-md-4">
          <%= link_to post_path(recent_post.id), class: "card-link" do %>
            <div class="card">
              <%= image_tag recent_post.desk_images[0].variant( resize: "478x269!").processed if recent_post.desk_images.attached?%>
              <div class="card-body">
                  <% if recent_post.user.avatar.attached? %>
                    <%= image_tag recent_post.user.avatar, class: "host-icon" %>
                  <% else %>
                    <img class="host-icon" src="/assets/default_icon.jpeg">
                  <% end %>
                <%= recent_post.user.name %>
                <i class="fa fa-heart" aria-hidden="true"></i>
                <%= recent_post.likes.count %>
                <i class="fa-regular fa-comments" aria-hidden="true"></i>
                <%= recent_post.comments.count %>
                <i class="fa-regular fa-bookmark" aria-hidden="true"></i>
                <%= recent_post.bookmarks.count %>
                <div class="post-title">
                  <%= recent_post.title %>
                </div>
              </div>
            </div>
          <% end %>
        </div>
      <% end %>
    </div>
  </div>

  <!-- Section 3 -->
	<%# カテゴリー別投稿 %>
  <div class="container top-section">
    <h3>カテゴリー別検索</h3>
    <div class="row category-search">
      <div class="col-md-4">
        <%= link_to posts_path(q: { category_eq: @categories[0].name}), class: "card-link" do%>
          <div class="card">
            <img src="/assets/Engineer_img.jpeg">
            <div class="card-body">
              <%= @categories[0].name %>
            </div>
          </div>
        <% end %>
      </div>

      <div class="col-md-4">
        <%= link_to posts_path(q: { category_eq: @categories[1].name}), class: "card-link" do%>
          <div class="card">
            <img src="/assets/Writer_img.jpeg">
            <div class="card-body">
              <%= @categories[1].name %>
            </div>
          </div>
        <% end %>
      </div>

      <div class="col-md-4">
        <%= link_to posts_path(q: { category_eq: @categories[2].name}), class: "card-link" do%>
          <div class="card mb-2">
            <img src="/assets/Gamer_img.jpeg">
            <div class="card-body">
              <%= @categories[2].name %>
            </div>
          </div>
        <% end %>
      </div>

    </div>
  </div>
</div>

